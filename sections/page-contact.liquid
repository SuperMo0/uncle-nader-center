{% comment %}
  Refactored Contact Page
  Displays a central message and configurable blocks for contact details (Phone, Location).
{% endcomment %}

<div class="page contact-page">
  <div class="contact-header">
    <h1 class="page-title">
      {% if section.settings.title != blank %}
        {{ section.settings.title }}
      {% else %}
        {{ page.title }}
      {% endif %}
    </h1>

    <div class="page-content">
      {% if section.settings.content != blank %}
        {{ section.settings.content }}
      {% endif %}
    </div>
  </div>

  <div class="contact-blocks">
    {% for block in section.blocks %}
      <div class="contact-block contact-block--{{ block.type }}" {{ block.shopify_attributes }}>
        {% case block.type %}
          {% when 'phone' %}
            <div class="contact-icon">
              {% render 'ammonader-icons', icon: 'phone' %}
            </div>
            <h3>{{ block.settings.heading }}</h3>
            <p class="contact-phone-number">
              <a href="tel:{{ block.settings.phone }}" dir="ltr">{{ block.settings.phone }}</a>
            </p>
            {% if block.settings.text != blank %}
              <div class="contact-text">{{ block.settings.text }}</div>
            {% endif %}

          {% when 'location' %}
            <div class="contact-icon">
              {% render 'ammonader-icons', icon: 'map-pin' %}
            </div>
            <h3>{{ block.settings.heading }}</h3>
            {% if block.settings.address != blank %}
              <div class="contact-address">{{ block.settings.address }}</div>
            {% endif %}
            {% if block.settings.map_link != blank %}
              <a href="{{ block.settings.map_link }}" target="_blank" class="button button--outline">
                {{ block.settings.button_label | default: 'عرض الموقع' }}
              </a>
            {% endif %}
        {% endcase %}
      </div>
    {% endfor %}
  </div>
</div>

{% stylesheet %}
  .contact-page {
    padding-block: 6rem;
    max-width: 1000px;
    margin: 0 auto;
    padding-inline: 1.5rem;
    text-align: center;
  }

  .contact-header {
    margin-bottom: 5rem;
    max-width: 600px;
    margin-inline: auto;
  }

  .page-title {
    color: var(--ammo-primary-dark);
    margin-bottom: 1.5rem;
    font-size: 3rem;
    font-weight: 800;
  }

  .page-content {
    font-size: 1.5rem;
    color: var(--ammo-dark);
    line-height: 1.6;
    font-weight: 500;
  }

  .contact-blocks {
    display: grid;
    gap: 2rem;
    grid-template-columns: 1fr;
  }

  @media screen and (min-width: 750px) {
    .contact-blocks {
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      justify-content: center;
    }
  }

  .contact-block {
    background: var(--ammo-white);
    padding: 3rem 2rem;
    border-radius: 1.5rem;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: 1px solid transparent;
  }

  .contact-block:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.08);
    border-color: rgba(0, 0, 0, 0.05);
  }

  .contact-icon {
    width: 80px;
    height: 80px;
    background: var(--ammo-warm);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1rem;
    color: var(--ammo-primary-dark);
  }

  .contact-icon svg {
    width: 36px;
    height: 36px;
  }

  .contact-block h3 {
    font-size: 1.5rem;
    margin: 0;
    color: var(--ammo-dark);
    font-weight: 700;
  }

  .contact-phone-number a {
    color: var(--ammo-primary);
    text-decoration: none;
    font-weight: 700;
    font-size: 1.5rem;
    font-family: sans-serif; /* Ensures numbers display clearly */
  }

  .contact-text,
  .contact-address {
    color: #666;
    line-height: 1.6;
    max-width: 250px;
    font-size: 1rem;
  }

  .button--outline {
    margin-top: 1rem;
    border: 2px solid var(--ammo-primary);
    background: transparent;
    color: var(--ammo-primary);
    padding: 0.75rem 2rem;
    border-radius: 9999px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
    display: inline-block;
  }

  .button--outline:hover {
    background: var(--ammo-primary);
    color: #fff;
  }
{% endstylesheet %}

{% schema %}
{
  "name": "صفحة التواصل",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "عنوان الصفحة",
      "default": "تواصل معنا"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "النص الترحيبي",
      "default": "<p>كيف يمكننا مساعدتك؟ نحن هنا لخدمتكم.</p>"
    }
  ],
  "blocks": [
    {
      "type": "phone",
      "name": "رقم الهاتف",
      "limit": 3,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "العنوان",
          "default": "اتصل بنا"
        },
        {
          "type": "text",
          "id": "phone",
          "label": "رقم الهاتف",
          "default": "+962 79 000 0000"
        },
        {
          "type": "text",
          "id": "text",
          "label": "نص إضافي",
          "default": "متاح من 9 صباحاً حتى 10 مساءً"
        }
      ]
    },
    {
      "type": "location",
      "name": "الموقع",
      "limit": 3,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "العنوان",
          "default": "موقعنا"
        },
        {
          "type": "textarea",
          "id": "address",
          "label": "العنوان بالتفصيل",
          "default": "عمان، الأردن - شارع مكة، مجمع أبراج الحجاز"
        },
        {
          "type": "url",
          "id": "map_link",
          "label": "رابط الخريطة (Google Maps)"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "نص الزر",
          "default": "عرض على الخريطة"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "صفحة التواصل",
      "blocks": [
        {
          "type": "phone"
        },
        {
          "type": "location"
        }
      ]
    }
  ]
}
{% endschema %}
